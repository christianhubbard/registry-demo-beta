{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "terminal",
  "type": "registry:component",
  "title": "Terminal Interface",
  "description": "An interactive terminal interface with number grid, progress tracking, and file selection.",
  "registryDependencies": ["https://registry-demo-xi.vercel.app/r/start.json"],
  "files": [
    {
      "path": "app/(lumon)/terminal/page.tsx",
      "content": "\"use client\";\n\nimport { useRef, useState } from \"react\";\nimport { Header, files } from \"@/components/terminal/header\";\nimport { NumberGrid } from \"@/components/terminal/number-grid\";\nimport { Footer, type SectionData } from \"@/components/terminal/footer\";\n\nexport default function Page() {\n  const [progress, setProgress] = useState(19);\n  const [selectedFile, setSelectedFile] = useState(files[0]);\n  const [sectionProgress, setSectionProgress] = useState<SectionData[]>([\n    { id: \"01\", progress: 30, active: false },\n    { id: \"02\", progress: 11, active: false },\n    { id: \"03\", progress: 9, active: false },\n    { id: \"04\", progress: 27, active: false },\n    { id: \"05\", progress: 18, active: false },\n  ]);\n  const [activeSection, setActiveSection] = useState<string | null>(null);\n  const numberGridRef = useRef<any>(null);\n\n  // Find a container with less than 100% progress\n  const findAvailableContainer = () => {\n    // Filter containers that aren't at 100%\n    const availableContainers = sectionProgress.filter(\n      (section) => section.progress < 100\n    );\n\n    if (availableContainers.length === 0) return null;\n\n    // Pick a random container from available ones\n    const randomIndex = Math.floor(Math.random() * availableContainers.length);\n    return availableContainers[randomIndex].id;\n  };\n\n  const handleNumberClick = (rowIndex: number, colIndex: number) => {\n    // Find an available container\n    const containerId = findAvailableContainer();\n    if (!containerId) return; // All containers are at 100%\n\n    // Update active section\n    setActiveSection(containerId);\n\n    // Update section progress\n    setSectionProgress((prev) =>\n      prev.map((section) => ({\n        ...section,\n        active: section.id === containerId,\n        progress:\n          section.id === containerId\n            ? Math.min(section.progress + 3, 100)\n            : section.progress,\n      }))\n    );\n\n    // Update overall progress\n    setProgress((prev) => Math.min(prev + 1, 100));\n\n    resetActiveSection();\n  };\n\n  // Reset active section after animation completes\n  const resetActiveSection = () => {\n    setTimeout(() => {\n      setSectionProgress((prev) =>\n        prev.map((section) => ({\n          ...section,\n          active: false,\n        }))\n      );\n      setActiveSection(null);\n    }, 3200); // Increased to match the total animation duration (700 + 1500 + 1000)\n  };\n\n  // Handle file change\n  const handleFileChange = (file: (typeof files)[0]) => {\n    setSelectedFile(file);\n    // Reset progress when changing files\n    setProgress(Math.floor(Math.random() * 30));\n    // Regenerate grid\n    if (NumberGrid.regenerateGrid) {\n      NumberGrid.regenerateGrid();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6 md:p-8 flex items-center justify-center font-mono\">\n      <div className=\"w-full max-w-4xl border border-border rounded-md bg-card text-card-foreground shadow-lg overflow-hidden\">\n        <Header\n          progress={progress}\n          selectedFile={selectedFile}\n          onFileChange={handleFileChange}\n        />\n        <NumberGrid onNumberClick={handleNumberClick} ref={numberGridRef} />\n        <Footer sections={sectionProgress} />\n      </div>\n    </div>\n  );\n}",
      "type": "registry:file",
      "target": "app/terminal/page.tsx"
    },
    {
      "path": "components/terminal/header.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Check, ChevronsUpDown } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport Image from \"next/image\";\n\n// File options for the combobox\nexport const files = [\n  { value: \"fluid-hive\", label: \"Fluid Hive\" },\n  { value: \"dranesville\", label: \"Dranesville\" },\n  { value: \"tumwater\", label: \"Tumwater\" },\n  { value: \"lexington\", label: \"Lexington\" },\n  { value: \"siena\", label: \"Siena\" },\n  { value: \"havana\", label: \"Havana\" },\n  { value: \"brasilia\", label: \"Brasilia\" },\n  { value: \"cairo\", label: \"Cairo\" },\n];\n\ninterface HeaderProps {\n  progress: number;\n  selectedFile: (typeof files)[0];\n  onFileChange: (file: (typeof files)[0]) => void;\n}\n\nexport function Header({ progress, selectedFile, onFileChange }: HeaderProps) {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <div className=\"border-b border-border p-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Popover open={open} onOpenChange={setOpen}>\n            <PopoverTrigger asChild>\n              <Button\n                variant=\"outline\"\n                role=\"combobox\"\n                aria-expanded={open}\n                className=\"w-[180px] justify-between ml-2 bg-muted border-border text-muted-foreground hover:bg-muted hover:text-[hsl(var(--primary))]\"\n              >\n                {selectedFile.label}\n                <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-[180px] p-0 bg-card border-border\">\n              <Command className=\"bg-transparent\">\n                <CommandInput\n                  placeholder=\"Search file...\"\n                  className=\"h-9 bg-transparent\"\n                />\n                <CommandList>\n                  <CommandEmpty>No file found.</CommandEmpty>\n                  <CommandGroup>\n                    {files.map((file) => (\n                      <CommandItem\n                        key={file.value}\n                        value={file.value}\n                        onSelect={(currentValue) => {\n                          const selected = files.find(\n                            (file) => file.value === currentValue\n                          );\n                          if (selected) {\n                            onFileChange(selected);\n                          }\n                          setOpen(false);\n                        }}\n                        className=\"text-muted-foreground hover:text-[hsl(var(--primary))]\"\n                      >\n                        <Check\n                          className={cn(\n                            \"mr-2 h-4 w-4\",\n                            selectedFile.value === file.value\n                              ? \"opacity-100\"\n                              : \"opacity-0\"\n                          )}\n                        />\n                        {file.label}\n                      </CommandItem>\n                    ))}\n                  </CommandGroup>\n                </CommandList>\n              </Command>\n            </PopoverContent>\n          </Popover>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex flex-col items-end\">\n            <span className=\"text-sm text-muted-foreground\">\n              {progress}% Complete\n            </span>\n            <Progress value={progress} className=\"w-32 h-1.5 mt-1\" />\n          </div>\n          <Image\n            height={32}\n            width={150}\n            src=\"https://9xunyj9nbtcqjdrd.public.blob.vercel-storage.com/lumon-bnmDHU0WvLZp4fEIo7pYFRxdNkWHNi.png\"\n            alt=\"Logo\"\n            className=\"px-2 py-4\"\n          />\n        </div>\n      </div>\n    </div>\n  );",
      "type": "registry:file",
      "target": "components/terminal/header.tsx"
    },
    {
      "path": "components/terminal/footer.tsx",
      "content": "import { useEffect, useState } from \"react\";\nimport { SectionContainer } from \"./section-container\";\n\n// Type for section data\nexport type SectionData = {\n  id: string;\n  progress: number;\n  active: boolean;\n};\n\ninterface FooterProps {\n  sections: SectionData[];\n}\n\nexport function Footer({ sections }: FooterProps) {\n  const [timeRemaining, setTimeRemaining] = useState(\"4h 32m\");\n  const [currentTime, setCurrentTime] = useState(\"\");\n\n  // Update clock\n  useEffect(() => {\n    const updateTime = () => {\n      const now = new Date();\n      const hours = now.getHours().toString().padStart(2, \"0\");\n      const minutes = now.getMinutes().toString().padStart(2, \"0\");\n      const seconds = now.getSeconds().toString().padStart(2, \"0\");\n      setCurrentTime(`${hours}:${minutes}:${seconds}`);\n    };\n\n    updateTime();\n    const interval = setInterval(updateTime, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"border-t border-border p-4\">\n      <div className=\"flex justify-between items-center mb-3\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-muted-foreground\">\n            Time Remaining: {timeRemaining}\n          </span>\n        </div>\n        <span className=\"text-sm text-muted-foreground\">{currentTime}</span>\n      </div>\n\n      <div className=\"grid grid-cols-5 gap-1.5\">\n        {sections.map((section) => (\n          <SectionContainer\n            key={section.id}\n            id={section.id}\n            progress={section.progress}\n            active={section.active}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}",
      "type": "registry:file",
      "target": "components/terminal/footer.tsx"
    },
    {
      "path": "components/terminal/number-grid.tsx",
      "content": "\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\n\ninterface NumberGridProps {\n  onNumberClick: (rowIndex: number, colIndex: number) => void\n}\n\nexport function NumberGrid({ onNumberClick }: NumberGridProps) {\n  // Grid dimensions\n  const ROWS = 10\n  const COLS = 15\n  const HIGHLIGHT_SIZE = 3\n\n  const [numberGrid, setNumberGrid] = useState<number[][]>([])\n  const [highlightedArea, setHighlightedArea] = useState<{\n    startRow: number\n    startCol: number\n  }>({ startRow: 0, startCol: 0 })\n  const [isHighlightVisible, setIsHighlightVisible] = useState(false)\n  const [highlightOpacity, setHighlightOpacity] = useState(0)\n  const timerRef = useRef<NodeJS.Timeout | null>(null)\n\n  // Generate random grid of numbers\n  const generateNumberGrid = (rows: number, cols: number) => {\n    const grid = []\n    for (let i = 0; i < rows; i++) {\n      const row = []\n      for (let j = 0; j < cols; j++) {\n        row.push(Math.floor(Math.random() * 10))\n      }\n      grid.push(row)\n    }\n    return grid\n  }\n\n  // Initialize grid\n  useEffect(() => {\n    setNumberGrid(generateNumberGrid(ROWS, COLS))\n  }, [])\n\n  // Function to generate a new highlighted area\n  const generateNewHighlightedArea = () => {\n    // Ensure the 3x3 grid fits within our number grid\n    const maxStartRow = ROWS - HIGHLIGHT_SIZE\n    const maxStartCol = COLS - HIGHLIGHT_SIZE\n\n    const startRow = Math.floor(Math.random() * maxStartRow)\n    const startCol = Math.floor(Math.random() * maxStartCol)\n\n    setHighlightedArea({ startRow, startCol })\n\n    // Start fade-in animation\n    setHighlightOpacity(0)\n    setIsHighlightVisible(true)\n\n    // Animate opacity from 0 to 1 over 500ms\n    let opacity = 0\n    const fadeInterval = setInterval(() => {\n      opacity += 0.1\n      setHighlightOpacity(opacity)\n      if (opacity >= 1) {\n        clearInterval(fadeInterval)\n      }\n    }, 50)\n  }\n\n  // Set up the highlight cycle\n  const startHighlightCycle = () => {\n    // Clear any existing timer\n    if (timerRef.current) {\n      clearTimeout(timerRef.current)\n    }\n\n    // Generate new highlighted area\n    generateNewHighlightedArea()\n\n    // Set timer for next cycle\n    timerRef.current = setTimeout(startHighlightCycle, 5000)\n  }\n\n  // Initialize and manage highlight cycle\n  useEffect(() => {\n    if (numberGrid.length > 0) {\n      startHighlightCycle()\n    }\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current)\n      }\n    }\n  }, [numberGrid])\n\n  // Check if a position is within the highlighted 3x3 area\n  const isHighlighted = (rowIndex: number, colIndex: number) => {\n    if (!isHighlightVisible) return false\n\n    const { startRow, startCol } = highlightedArea\n    return (\n      rowIndex >= startRow &&\n      rowIndex < startRow + HIGHLIGHT_SIZE &&\n      colIndex >= startCol &&\n      colIndex < startCol + HIGHLIGHT_SIZE\n    )\n  }\n\n  const handleClick = (rowIndex: number, colIndex: number) => {\n    // Check if the clicked position is within the highlighted area\n    if (!isHighlighted(rowIndex, colIndex)) return\n\n    // Unhighlight the grid\n    setIsHighlightVisible(false)\n\n    // Reset the timer to start a new 5-second cycle\n    if (timerRef.current) {\n      clearTimeout(timerRef.current)\n    }\n    timerRef.current = setTimeout(startHighlightCycle, 5000)\n\n    // Pass the click to the parent component\n    onNumberClick(rowIndex, colIndex)\n  }\n\n  // Method to regenerate the grid (exposed for parent component)\n  const regenerateGrid = () => {\n    setNumberGrid(generateNumberGrid(ROWS, COLS))\n  }\n\n  // Expose the regenerateGrid method to parent components\n  NumberGrid.regenerateGrid = regenerateGrid\n\n  return (\n    <div className=\"p-6 min-h-[400px] flex flex-col items-center justify-center bg-card\">\n      <div className=\"grid grid-cols-1 gap-y-2 font-mono text-center w-full\">\n        {numberGrid.map((row, rowIndex) => (\n          <div key={rowIndex} className=\"flex justify-center gap-x-4\">\n            {row.map((num, colIndex) => {\n              const highlighted = isHighlighted(rowIndex, colIndex)\n\n              return (\n                <div\n                  key={`${rowIndex}-${colIndex}`}\n                  className={`w-6 h-6 flex items-center justify-center text-xs sm:text-sm transition-all duration-300\n                    ${\n                      highlighted ? \"text-[hsl(var(--primary))] scale-150 z-10 cursor-pointer\" : \"text-muted-foreground\"\n                    }`}\n                  style={{\n                    opacity: highlighted ? highlightOpacity : 1,\n                  }}\n                  onClick={() => handleClick(rowIndex, colIndex)}\n                >\n                  {num}\n                </div>\n              )\n            })}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}",
      "type": "registry:file",
      "target": "components/terminal/number-grid.tsx"
    },
    {
      "path": "components/terminal/section-container.tsx",
      "content": "import { useEffect, useState } from \"react\";\nimport { Progress } from \"@/components/ui/progress\";\n\ninterface SectionContainerProps {\n  id: string;\n  progress: number;\n  active: boolean;\n}\n\nexport function SectionContainer({\n  id,\n  progress,\n  active,\n}: SectionContainerProps) {\n  const [displayProgress, setDisplayProgress] = useState(progress);\n  const [animationClass, setAnimationClass] = useState(\"\");\n\n  // Handle progress animation when active state changes\n  useEffect(() => {\n    if (active) {\n      // First, add the glow animation\n      setAnimationClass(\"ring-2 ring-primary transition-all duration-700\");\n\n      // After the glow animation, start incrementing the progress\n      const incrementDelay = setTimeout(() => {\n        // Start from current display progress and animate to the actual progress\n        const startValue = displayProgress;\n        const endValue = progress;\n        const duration = 1500; // 1.5 seconds\n        const stepTime = 50; // Update every 50ms\n        const steps = duration / stepTime;\n        const increment = (endValue - startValue) / steps;\n        let currentStep = 0;\n\n        const incrementInterval = setInterval(() => {\n          currentStep++;\n          const newValue = startValue + increment * currentStep;\n          setDisplayProgress(Math.min(Math.round(newValue), endValue));\n\n          if (currentStep >= steps) {\n            clearInterval(incrementInterval);\n            // Keep the glow for a moment after reaching the target\n            setTimeout(() => {\n              setAnimationClass(\"\"); // Remove the glow after completion\n            }, 1000); // 1 second of additional glow\n          }\n        }, stepTime);\n\n        return () => clearInterval(incrementInterval);\n      }, 700); // Start incrementing after 700ms (glow animation time)\n\n      return () => clearTimeout(incrementDelay);\n    } else {\n      // When not active, just show the current progress\n      setDisplayProgress(progress);\n      setAnimationClass(\"\");\n    }\n  }, [active, progress, displayProgress]);\n\n  return (\n    <div\n      className={`p-3 border border-border rounded bg-card ${animationClass}`}\n    >\n      <div className=\"flex items-center justify-between mb-1\">\n        <span className=\"text-xs font-medium text-muted-foreground\">#{id}</span>\n        <span className=\"text-xs font-medium text-muted-foreground\">\n          {displayProgress}%\n        </span>\n      </div>\n      <Progress value={displayProgress} className=\"h-1.5\" />\n    </div>\n  );\n}",
      "type": "registry:file",
      "target": "components/terminal/section-container.tsx"
    }
  ]
}